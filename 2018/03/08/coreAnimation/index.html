<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="iOS," />










<meta name="description" content="1.æ”¹å†™hittestæ–¹æ³•ï¼Œç”¨äºå‡ å±‚åŠ¨ç”»2.ç²’å­åŠ¨ç”»3.CoreAnimation ä¸CATransform3D">
<meta name="keywords" content="iOS">
<meta property="og:type" content="article">
<meta property="og:title" content="coreAnimation">
<meta property="og:url" content="https://XiuFi.github.io/2018/03/08/coreAnimation/index.html">
<meta property="og:site_name" content="XiuFiä¸ªäººåšå®¢">
<meta property="og:description" content="1.æ”¹å†™hittestæ–¹æ³•ï¼Œç”¨äºå‡ å±‚åŠ¨ç”»2.ç²’å­åŠ¨ç”»3.CoreAnimation ä¸CATransform3D">
<meta property="og:image" content="https://xiufi.github.io/2018/03/08/coreAnimation/img/coreA.png">
<meta property="og:updated_time" content="2018-04-04T14:34:33.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="coreAnimation">
<meta name="twitter:description" content="1.æ”¹å†™hittestæ–¹æ³•ï¼Œç”¨äºå‡ å±‚åŠ¨ç”»2.ç²’å­åŠ¨ç”»3.CoreAnimation ä¸CATransform3D">
<meta name="twitter:image" content="https://xiufi.github.io/2018/03/08/coreAnimation/img/coreA.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://XiuFi.github.io/2018/03/08/coreAnimation/"/>





  <title>coreAnimation | XiuFiä¸ªäººåšå®¢</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">XiuFiä¸ªäººåšå®¢</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Startseite
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Kategorien
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archiv
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://XiuFi.github.io/2018/03/08/coreAnimation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="XiuFi,Jeff He">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="XiuFiä¸ªäººåšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">coreAnimation</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">VerÃ¶ffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-08T11:00:35+08:00">
                2018-03-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>1.æ”¹å†™hittestæ–¹æ³•ï¼Œç”¨äºå‡ å±‚åŠ¨ç”»<br>2.ç²’å­åŠ¨ç”»<br>3.CoreAnimation ä¸CATransform3D<br><a id="more"></a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-(id)hitTest:(CGPoint)point withEvent:(UIEvent *)event</span><br><span class="line">&#123;</span><br><span class="line">NSArray *subViews = self.subviews;</span><br><span class="line">for(UIView *subView in subViews)&#123;</span><br><span class="line">if([subView isKindOfClass:[FoamImageView class]])&#123; //æ˜¯è¦æ‰¾çš„å›¾ç‰‡</span><br><span class="line">CALayer *layer = subView.layer.presentationLayer; //å›¾ç‰‡çš„æ˜¾ç¤ºå±‚</span><br><span class="line">if(CGRectContainsPoint(layer.frame, point))&#123; //è§¦æ‘¸ç‚¹åœ¨æ˜¾ç¤ºå±‚ä¸­ï¼Œè¿”å›å½“å‰å›¾ç‰‡</span><br><span class="line">return subView;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">return [super hitTest:point withEvent:event];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç²’å­åŠ¨ç”»<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">-(void)setupCAEmitterLayer&#123;</span><br><span class="line">CAEmitterLayer *rockEmitter = [CAEmitterLayer layer];</span><br><span class="line">//å‘å°„æºä½ç½®</span><br><span class="line">rockEmitter.emitterPosition = CGPointMake(SCREENWIDTH, 0);</span><br><span class="line">rockEmitter.emitterSize = CGSizeMake(SCREENWIDTH, 0);</span><br><span class="line">rockEmitter.emitterShape = kCAEmitterLayerLine;</span><br><span class="line">rockEmitter.emitterMode = kCAEmitterLayerOutline;</span><br><span class="line">rockEmitter.renderMode =  kCAEmitterLayerOldestLast;</span><br><span class="line">CAEmitterCell *rock = [CAEmitterCell emitterCell];</span><br><span class="line">rock.birthRate = 10 ;</span><br><span class="line">rock.lifetime = 6;</span><br><span class="line">//ç²’å­é€æ˜é€Ÿåº¦</span><br><span class="line">rock.alphaSpeed = -0.1;</span><br><span class="line">//ç²’å­é€Ÿåº¦</span><br><span class="line">rock.velocity = 280;</span><br><span class="line">rock.velocityRange = 100;</span><br><span class="line">//è§’åº¦</span><br><span class="line">// rock.emissionRange = 0;</span><br><span class="line">rock.emissionLongitude = - 3*M_PI_4;</span><br><span class="line">rock.emissionRange = -M_PI_4/2;</span><br><span class="line">rock.contents = (id)[[UIImage imageNamed:@&quot;rocktest&quot;] CGImage];</span><br><span class="line">rock.scaleRange = 0.5;</span><br><span class="line">rock.scale = 0.5;</span><br><span class="line">rockEmitter.emitterCells = [NSArray arrayWithObjects:rock, nil];</span><br><span class="line">// [rockEmitter setValue:@500 forKeyPath:@&quot;emitterCells.explosion.birthRate&quot;];</span><br><span class="line">//    rockEmitter.transform = CATransform3DMakeRotation(-M_PI/4, 0, 0, 1);</span><br><span class="line">[self.view.layer addSublayer:rockEmitter];</span><br><span class="line">self.rockEmitter = rockEmitter;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å…·ä½“çš„ä¸å¤šè¯´ï¼Œç½‘ä¸Šå¥½å¤šå¤§ç¥ä»¬æ¯”æˆ‘çš„è¯¦ç»†ï¼Œå…·ä½“æœ‰å‡ ç‚¹æ³¨æ„çš„æƒ³æä¸€ä¸‹</span><br><span class="line">1.æ˜¯layerå±‚åŠ¨ç”»ï¼Œå¯ä»¥å’Œtransform3Dç»“åˆä½¿ç”¨ï¼Œä½†å…·ä½“éƒ½ç†è§£å‘å°„æºï¼Œå‘å°„æ¨¡å¼è¿™ä¸¤ä¸ªæ¦‚å¿µå°±å¯ä»¥äº†</span><br><span class="line">2.æœ‰rangeåç¼€çš„éƒ½æ˜¯èŒƒå›´å˜é‡ï¼Œä¾‹å¦‚é€Ÿåº¦çš„å˜é‡ï¼Œè§’åº¦çš„å˜é‡</span><br><span class="line">3.å¢åŠ çš„æ–¹å¼æ˜¯å‘å°„æºçš„ä¸€ä¸ªå±æ€§emitterCells æ·»åŠ ç²’å­ï¼Œå¯ä»¥æ·»åŠ å¾ˆå¤šç§ä¸åŒçš„ç²’å­</span><br><span class="line">4.ç²’å­çš„é€Ÿåº¦cell.velocityæ˜¯å‘å°„æ–¹å‘cell.emissionLongitudeä¸Šçš„é€Ÿåº¦</span><br></pre></td></tr></table></figure></p>
<p><em>CoreAnimation</em><br>CoreAnimation æ˜¯è‹¹æœä¸€ç»„å®ç°éå¸¸å¼ºå¤§åŠ¨ç”»çš„APIï¼Œå®ƒå†…éƒ¨çš„å®ç°æ˜¯é€šè¿‡ä½ ç»™å®šä¸€ä¸ªçŸ¢é‡ï¼Œä¹˜ä»¥å®ƒä¸€ä¸ªå››ç»´çŸ©é˜µå˜åŒ–è€Œæˆï¼Œå¯æ˜¯æˆ‘è¯»çš„ä¹¦å°‘ğŸ˜‚ï¼Œå†…éƒ¨çš„åŸç†æ€æ ·å˜åŒ–æˆ‘è¿˜ä¸æ˜¯å¤ªæ˜ç™½ï¼Œå®¹æˆ‘æ¶è¡¥ä¸€ä¸‹çº¿æ€§ä»£æ•°ä»¥åå†æ·±å…¥ç ”ç©¶ğŸ˜„ï¼Œä»Šå¤©å°±è¯´ä¸€ä¸‹å¤§æ¦‚å¦‚ä½•ç®€å•ä½¿ç”¨CoreAnimationåšå‡º3Dçš„åŠ¨ç”»ã€‚</p>
<p><em>CALayer ç®€è¿°</em></p>
<p>åœ¨ç†è§£CoreAnimationä¹‹å‰ï¼Œé¦–å…ˆè¦å¯¹å›¾å±‚ï¼ˆCALayerï¼‰æœ‰æ¦‚å¿µï¼Œå› ä¸ºæ ¸å¿ƒåŠ¨ç”»éƒ½æ˜¯ç”¨æ·»åŠ åœ¨CALayerå±‚çš„ï¼Œè¿™é‡Œç®€å•è¯´ä¸€ä¸‹ï¼ŒUIViewä¹‹æ‰€ä»¥èƒ½è¢«æ˜¾ç¤ºå‡ºæ¥ï¼Œå°±æ˜¯å› ä¸ºUIViewå†…éƒ¨æœ‰ä¸€ä¸ªlayerå±æ€§ï¼Œè€ŒUIViewæ˜¾ç¤ºçš„å†…å®¹ï¼Œéƒ½æ˜¯æœ‰layerå±‚å†³å®šã€‚ç›¸å½“äºUIViewæ˜¯ä¸€ä¸ªç”»æ¿ï¼Œè€Œlayeræ˜¯ä¸€å¼ ç”»çº¸ï¼Œç”»æ¿çš„å†…å®¹æ˜¯å–å†³äºä½ å†ç”»çº¸ä¸Šç”»äº†ä»€ä¹ˆï¼ˆlayerå†³å®šUIViewæ˜¾ç¤ºçš„å†…å®¹ï¼‰ã€‚å› ä¸ºCALayerå†…éƒ¨è¿˜æœ‰è®¸å¤šæŒºé‡è¦çš„å±æ€§ã€‚è¿™é‡Œæˆ‘ä»¬å…ˆåšå‡ºç®€å•çš„3DåŠ¨ç”»ï¼Œä»¥åå†ç»“åˆlayerå±‚çš„å±æ€§åšæ›´é…·ç‚«çš„åŠ¨ç”» ğŸ˜</p>
<p><img src="img/coreA.png"></p>
<p>æˆ‘ä»¬ç°åœ¨ç”¨CABasicAnimationæ¥åšä¸€ä¸ªä¸‰ç»´åŠ¨ç”»</p>
<p>åŠ¨ç”»çš„å†³å®šæ€§å› ç´ </p>
<p>åšåŠ¨ç”»çš„æ—¶å€™ï¼Œæœ‰ä¸€ä¸ªç†å¿µï¼Œè¿™ä¸ªå°±ç±»ä¼¼å¼€å‘æ¸¸æˆï¼Œ1è° åš  2åŠ¨ç”»</p>
<p>1è°</p>
<p>è¿™é‡Œçš„è°éƒ½æ˜¯layerï¼Œå› ä¸ºcoreAnimationéƒ½æ˜¯ä½œç”¨åœ¨layerå±‚ä¸Šçš„ï¼Œæ‰€ä»¥å¿…é¡»æ˜¯å“ªä¸ªviewçš„layer</p>
<p><code>[self.view.layer  addAnimation:animRotaforKey:nil];</code><br>keyå€¼æ˜¯ä¸ºäº†ä»¥åå¯ä»¥ç§»é™¤è¿™ä¸ªåŠ¨ç”»è€Œéœ€è¦çš„ï¼Œå¯ä»¥éšä¾¿ç»™ï¼Œä¹Ÿå¯ä»¥ç»™ç©ºï¼Œä¸ä¸å…¶ä»–çš„åŠ¨ç”»é‡å¤å°±å¯ä»¥äº†,å¦‚æœéœ€è¦æ—¥åç§»é™¤æˆ–è€…åƒä¸Šé¢åšå‡ å±‚åŠ¨ç”»çš„è¯å°±éœ€è¦ç»™ä¸Škeyæ–¹ä¾¿å¾—åˆ°ï¼Œä¸”èƒ½åœ¨åŠ¨ç”»çš„ä»£ç†æ–¹æ³•æ ¹æ®keyæ‰¾åˆ°å¯¹åº”çš„åŠ¨ç”»</p>
<p>2åŠ¨ç”»</p>
<p>åŠ¨ç”»å°±æ˜¯ä½ æƒ³è®©ä»–å®ç°ä»€ä¹ˆæ•ˆæœï¼ŒcoreAnimationæœ‰ä¸ªä¸‰ç»´çš„åæ ‡ç³»ï¼Œæ‰€ä»¥åŠ ä¸Šä½ çš„æƒ³è±¡åŠ›ï¼Œå¯ä»¥å®Œæˆéå¸¸å¤šçš„æ•ˆæœï¼Œä¸è¿‡å»ºè®®å„ä½åœ¨åšåŠ¨ç”»çš„æ—¶å€™ç‰¢è®°ä¸‹é¢å‡ ç‚¹ï¼š</p>
<p>1ï¼ŒåŠ¨ç”»ç»“æŸä¹‹åï¼Œlayer.positionçš„ä½ç½®æ˜¯ä¸å˜çš„</p>
<p>2ï¼Œå¯ä»¥ç”¨ä¸€ä¸‹ä¸¤å¥è¯ï¼Œä¿æŒlayeråœ¨ä½ åŠ¨ç”»ç»“æŸåçš„ä½ç½®</p>
<p><code>animRota.removedOnCompletion=NO;</code></p>
<p><code>animRota.fillMode=kCAFillModeForwards;</code></p>
<p>3,å»ºè®®åœ¨åˆ›å»ºåŠ¨ç”»çš„æ—¶å€™åˆ›å»ºä¸€ä¸ªåŠ¨ç”»çš„ä¸Šä¸‹æ–‡ï¼Œè¿™æ ·ä½ å°±å¯ä»¥åŒæ—¶å®Œæˆæ—‹è½¬ï¼Œæ”¾å¤§ï¼Œå¹³ç§»å„ç§å˜æ¢</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªåŠ¨ç”»çš„å®ä¾‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">CABasicAnimation*anim = [CABasicAnimationanimation];</span><br><span class="line"></span><br><span class="line">anim.keyPath=@&quot;transform&quot;;</span><br><span class="line"></span><br><span class="line">CATransform3D tra =CATransform3DMakeTranslation(100, 100,0);</span><br><span class="line"></span><br><span class="line">CATransform3D tra2 =CATransform3DRotate(tra,M_PI_2,0,1,1);</span><br><span class="line"></span><br><span class="line">anim.toValue= [NSValuevalueWithCATransform3D:tra2];</span><br><span class="line"></span><br><span class="line">anim.duration=0.8;</span><br><span class="line"></span><br><span class="line">anim.removedOnCompletion=NO;</span><br><span class="line"></span><br><span class="line">anim.fillMode=kCAFillModeForwards;</span><br><span class="line"></span><br><span class="line">[self.view.layeraddAnimation:animforKey:nil];</span><br></pre></td></tr></table></figure></p>
<p>è¿™é‡Œæœ€ä¸»è¦çš„æ˜¯è¿™å‡ å¥ä»£ç <br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.CATransform3D tra =CATransform3DMakeTranslation(100, 100,0);</span><br><span class="line"></span><br><span class="line">2.CATransform3D tra2 =CATransform3DRotate(tra,M_PI_2,0,1,1);</span><br><span class="line"></span><br><span class="line">3.anim.toValue= [NSValuevalueWithCATransform3D:tra2];</span><br></pre></td></tr></table></figure></p>
<p>1ä¸ºåˆ›å»ºä¸€ä¸ªå‘X,Y,Zæ–¹å‘å¹³ç§»ï¼ˆ100ï¼Œ100ï¼Œ0ï¼‰çš„CATransformå¯¹è±¡ tra</p>
<p>2åœ¨traçš„åŸºç¡€ä¸Šå†åˆ›å»ºä¸€ä¸ªæ²¿ï¼ˆ0ï¼Œ1ï¼Œ1ï¼‰çŸ¢é‡æ–¹å‘æ—‹è½¬M_PI_2çš„CATransform3Då¯¹è±¡tra2</p>
<p>3 åŠ¨ç”»çš„æœ€ç»ˆä½ç½®åœ¨ tra2è¿™ä¸ªä½ç½®ã€‚</p>
<p>keyPathæ˜¯ä½ æƒ³æ”¹å˜çš„å±æ€§ï¼ŒAPIæ–‡æ¡£ä¸Šæœ‰å¾ˆå¤šèƒ½å±æ€§èƒ½çœ‹ï¼Œä¸è¿‡ä¸€èˆ¬â€transformâ€å±æ€§èƒ½æ»¡è¶³ä½ çš„æ‰€æœ‰éœ€æ±‚ï¼Œå› ä¸ºæ”¹äº†å½¢å˜å±æ€§èƒ½åœ¨ä¸‰ä¸ªç»´åº¦è¿›è¡Œå¹³ç§»ï¼Œæ—‹è½¬ï¼Œç¼©æ”¾</p>
<p>toValueæ˜¯æœ€ç»ˆå€¼ï¼Œå°±æ˜¯æœ€ålayerä¼šåœ¨è¿™ä¸ªä½ç½®ã€‚</p>
<p>byValueæ˜¯å¢é‡ï¼Œå°±æ˜¯layeræ¯ä¸€æ¬¡å¢åŠ è¿™ä¹ˆå¤š</p>
<p>durationæ˜¯åŠ¨ç”»æ‰§è¡Œæ—¶é—´</p>
<p>ç»¼ä¸Šï¼Œä½ åªè¦æ”¹å˜ä¸€ä¸‹layerå’Œanimï¼Œä½ å°±å¯ä»¥éšå¿ƒæ‰€é‡åšå‡ºCABaseAnimationåŠ¨ç”»å•¦</p>
<p><em>CATransform3D</em><br>structCATransform3D</p>
<p>{</p>
<p>CGFloat m11, m12, m13, m14;</p>
<p>CGFloat m21, m22, m23, m24;</p>
<p>CGFloat m31, m32, m33, m34;</p>
<p>CGFloat m41, m42, m43, m44;</p>
<p>};</p>
<p>typedef struct CATransform3D CATransform3D;</p>
<p>ä»å®˜æ–¹æ–‡æ¡£å¯ä»¥çŸ¥é“ï¼ŒCATransform3Dæ˜¯ä¸€ä¸ªå››ç»´çŸ©é˜µï¼Œæ‰€ä»¥æˆ‘æ¨è®ºå¯èƒ½æœ‰ä¸‹é¢åŸå› </p>
<p>1.ä¸€ä¸ªç‚¹èƒ½æ˜¾ç¤ºåœ¨å±å¹•ä¸Šå¯ä»¥ç”±(x,y,z)å†³å®šï¼Œå˜å½¢çš„æ—¶å€™ä¼šå°†ä¸€ä¸ªä¸‰ç»´åæ ‡ï¼ˆx,y,zï¼‰è½¬æ¢ä¸ºé½æ¬¡åæ ‡(x,y,z,w)ã€‚ä»¥æ­¤æ¥å°†å¹³ç§»çŸ©é˜µå’Œæ—‹è½¬ï¼Œç¼©æ”¾çŸ©é˜µç»“åˆè¿ç®—</p>
<p>2.CATransform3Dæ˜¯ä¸€ä¸ªè¡¨ç¤ºå˜å½¢çš„ç±»ï¼Œå®ƒæ˜¯æ‹¿æ¥è¿ç®—çš„è¿‡åº¦ï¼Œå¹¶ä¸æ˜¯ç”¨æ¥è¡¨ç¤ºä¸€ä¸ªviewçš„å…·ä½“ä½ç½®ï¼Œè€Œä¸€ä¸ªviewçš„å…·ä½“ä½ç½®æ˜¯ï¼ˆx,y,zï¼‰ä¸‰ç»´åæ ‡æˆ–è€…ï¼ˆx,y,z,wï¼‰ä¸€ä¸ªé½æ¬¡åæ ‡æ¥è¡¨ç¤ºï¼Œè€Œ4è¡Œ4åˆ—çš„çŸ©é˜µå¯ä»¥å°†å¹³ç§»è¿™ç§ç›¸åŠ çš„çŸ©é˜µå’Œæ—‹è½¬ï¼Œç¼©æ”¾è¿™æ ·ç›¸ä¹˜çš„çŸ©é˜µç»“åˆèµ·æ¥</p>
<p><em>3ä¸ªå˜æ¢çŸ©é˜µ:å¹³ç§»çŸ©é˜µï¼Œç¼©æ”¾çŸ©é˜µï¼Œæ—‹è½¬çŸ©é˜µ</em></p>
<p><em>å¹³ç§»çŸ©é˜µ</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">t&apos; =[1 0 0 0; 0 1 0 0; 0 0 1 0; tx ty tz 1]. */</span><br><span class="line"></span><br><span class="line">CA_EXTERN CATransform3DCATransform3DMakeTranslation (CGFloat tx,CGFloat ty,CGFloat tz)</span><br><span class="line"></span><br><span class="line">__OSX_AVAILABLE_STARTING(__MAC_10_5, __IPHONE_2_0);</span><br></pre></td></tr></table></figure></p>
<p>å¤§å®¶å¯ä»¥ä»è¿™é‡Œçœ‹å‡ºæ¥ï¼Œå¹³ç§»çŸ©é˜µæ˜¯ä¸€ä¸ª{</p>
<p>1  0  0 0</p>
<p>0  1  0  0</p>
<p>0  0  1  0</p>
<p>tx ty tz 1</p>
<p>};</p>
<p><em>ç¼©æ”¾çŸ©é˜µ</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/* Returns a transform that scales by `(sx, sy, sz)&apos;:</span><br><span class="line"></span><br><span class="line">* t&apos; = [sx 0 0 0; 0 sy 0 0; 0 0 sz 0; 0 0 0 1]. */</span><br><span class="line"></span><br><span class="line">CA_EXTERNCATransform3DCATransform3DMakeScale (CGFloatsx,CGFloatsy,CGFloatsz)</span><br><span class="line"></span><br><span class="line">__OSX_AVAILABLE_STARTING(__MAC_10_5, __IPHONE_2_0);</span><br></pre></td></tr></table></figure>
<p>å¤§å®¶å¯ä»¥ä»è¿™é‡Œçœ‹å‡ºæ¥ï¼Œç¼©æ”¾çŸ©é˜µæ˜¯ä¸€ä¸ª{</p>
<p>sx  0  0  0</p>
<p>0  sy  0  0</p>
<p>0  0  sz  0</p>
<p>0  0   0   1</p>
<p>};</p>
<p>è¿™æ ·çš„çŸ©é˜µï¼Œæ‰€ä»¥å½“ä¸€ä¸ªviewç”¨CATransform3DMakeTranslationï¼ˆtxï¼Œtyï¼Œtzï¼‰çš„æ—¶å€™ï¼Œå°±ä¼šç”¨æœ¬èº«çš„é½æ¬¡åæ ‡ï¼ˆx,y,z,wï¼‰å»ä¸å¹³ç§»çŸ©é˜µç›¸ä¹˜ï¼Œå¾—å‡ºæ¥æ–°çš„é½æ¬¡åæ ‡(x,y,z,w)</p>
<p><em>æ—‹è½¬çŸ©é˜µ</em></p>
<p>æ—‹è½¬çŸ©é˜µå®˜æ–¹å¹¶æ²¡æœ‰ç»™å‡º,ä½†å¯ä»¥ä»<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Return a transform which rotates by `angle&apos; radians:</span><br><span class="line"></span><br><span class="line">t&apos; = [ cos(angle) sin(angle) -sin(angle) cos(angle) 0 0 ] */</span><br><span class="line"></span><br><span class="line">CG_EXTERNCGAffineTransformCGAffineTransformMakeRotation(CGFloatangle)</span><br><span class="line"></span><br><span class="line">CG_AVAILABLE_STARTING(__MAC_10_0, __IPHONE_2_0);</span><br></pre></td></tr></table></figure></p>
<p>CAAffineTransformæ¨å¯¼å‡ºæ¥ï¼Œä½†æˆ‘è‡ªå·±å–œæ¬¢ç”¨å‡ ä½•çš„æ–¹æ³•æè¿°ç‰©ä½“çš„æ—‹è½¬ï¼Œæ¯•ç«Ÿä»£æ•°çš„æ–¹æ³•ä¸å®¢è§‚ï¼Œæˆ‘ä»¬åœ¨çœ‹çœ‹CATransform3DMakeRotationçš„æ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Returns a transform that rotates by &apos;angle&apos; radians about the vector</span><br><span class="line"></span><br><span class="line">* &apos;(x, y, z)&apos;. If the vector has length zero the identity transform is</span><br><span class="line"></span><br><span class="line">* returned. */</span><br><span class="line"></span><br><span class="line">CA_EXTERN CATransform3D CATransform3DMakeRotation</span><br><span class="line"></span><br><span class="line">(CGFloatangle,CGFloatx,CGFloaty,CGFloatz)</span><br><span class="line"></span><br><span class="line">__OSX_AVAILABLE_STARTING(__MAC_10_5, __IPHONE_2_0);</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬ç»™å®šäº†4ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è§’åº¦ï¼Œå°±æ˜¯æ—‹è½¬çš„è§’åº¦ï¼Œè€Œåé¢ä¸‰ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‘é‡(x,y,z)ï¼Œä¸éš¾çœ‹å‡ºvectoræ˜¯å‘é‡çš„æ„æ€ï¼Œå°±æ˜¯ä½ æ ¹æ®ä¸€ä¸ªå‘é‡å’Œè§’åº¦æ¥ç¡®è®¤æ—‹è½¬çš„æ–¹å‘å’Œè§’åº¦ï¼Œè¿™é‡Œæ¶‰åŠçš„è®¡ç®—æ¯”è¾ƒå¤æ‚ï¼Œç®€å•çš„è®¤ä¸ºå°±æ˜¯ä½ çš„å›¾å½¢ä¼šåœ¨ä½ ç»™çš„å‘é‡æ–¹å‘ï¼ˆx,y,zï¼‰çš„å‚ç›´é¢ä¸Šå†æ—‹è½¬angleè§’åº¦ï¼Œç®€è¿°å¦‚ä¸‹ï¼š</p>
<p>ä¸€ä¸ªç‚¹ç»•è¿‡åŸç‚¹çš„è½´uæ—‹è½¬ç­‰ä»·äºåˆ†åˆ«ç»•x y zè½´æ—‹è½¬ç‰¹å®šçš„è§’åº¦<br>    PSï¼šå¦‚æœè¿˜æƒ³æ·±å…¥ç†è§£çš„å°ä¼™ä¼´ï¼Œå¯ä»¥çœ‹ä¸‹è®¡ç®—æœºå›¾å½¢å­¦ç›¸å…³çš„çŸ¥è¯†ï¼Œå…¶å®éƒ½æ˜¯æƒ³é€šçš„åŸç†ï¼Œä¸éœ€è¦å› ä¸ºè®¾è®¡åˆ°ä»€ä¹ˆæ•°å­¦çŸ¥è¯†å»å®³æ€•ä»–ï¼Œå› ä¸ºç”¨çš„è¯å‚è€ƒæˆ‘ç¬¬ä¸€ç¯‡æ–‡ç« å°±å¯ä»¥ç®€å•ä½¿ç”¨äº†ï¼Œä¸è¿‡æƒ³æ·±å…¥äº†è§£ï¼ŒåŸç†æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œè€ƒè™‘åˆ°ç°åœ¨Appä¸æ€ä¹ˆåšåˆ°3ç»´åŠ¨ç”»ï¼Œæ‰€ä»¥ä¸‰ç»´åŠ¨ç”»çš„æš‚æ—¶å°±å…ˆå‘Šä¸€æ®µè½ï¼Œä¸‹æ¬¡ä¼šå¸¦æ¥æ¯”è¾ƒé€‚ç”¨è‡ªå®šä¹‰è½¬åœºğŸ˜</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/iOS/" rel="tag"># iOS</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/03/07/ iOSæŠ€æœ¯ç‚¹/" rel="next" title="iOSæŠ€æœ¯ç‚¹">
                <i class="fa fa-chevron-left"></i> iOSæŠ€æœ¯ç‚¹
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/04/04/NavigationController/" rel="prev" title="NavigationController">
                NavigationController <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">XiuFi,Jeff He</p>
              <p class="site-description motion-element" itemprop="description">iOS,Xcode</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">12</span>
                  <span class="site-state-item-name">Artikel</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">Kategorien</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">Tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">XiuFi,Jeff He</span>

  
</div>


  <div class="powered-by">Erstellt mit  <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
